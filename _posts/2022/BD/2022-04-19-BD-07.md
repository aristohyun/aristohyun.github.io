---
layout: post
title: "BD, L7. MongoDB Aggregation Framework"
description: "빅데이터 시스템 디자인, 아지즈교수님"
categories: [BigDataSystemDesign]
tags: [2022-1, Big Data System Design, BD, 아지즈]
use_math: true
redirect_from:
  - /2022/04/19
---

* Kramdown table of contents
{:toc .toc} 

db.collection.aggregate(pipeline_array, options)


# Pipeline stages

<multi-stage>
<stage>
$match
Filter documents
= WEHRE, HAVING

$project
Reshape documents
= SELECT

$group
Summarize documents
= GROUP BY

$sort
Order documents
= ORDER BY

</stage>

<stage>

$limit and $skip
Paginate document
= LIMIT

$unwind
Create documents from array elements

$sum
=SUM()

#sortByCount
= COUNT()
</stage>
</multi-stage>

## $match

## $project

can creating sub-document fileds, new fields

## $group

_Id를 기준으로 묶는다

## $unwind : 시험 

deconstructs

새로운 document를 만들어주는데, 배열로 이루어진 element를 쪼개서 각각의 데이터로 만들어줌

- Array replaced by element value
- Missing/empty fields → no output

피자헛중 제일맛있는 곳이 어디냐
배열을 쪼갠 후
그레이드 A만 검색
그리고 프로젝션해서 원하는 텍스트만 찾음
그리고 솔팅 (1은 오름차, -1은 내림차)

30~40 이론 빅4
60 쿼리

## $sort

## $limit

## skip






