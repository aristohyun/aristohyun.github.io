---
layout: post
title: "BD, L4. MongoDB Overview"
description: "빅데이터 시스템 디자인, 아지즈교수님"
categories: [BigDataSystemDesign]
tags: [2022-1, Big Data System Design, BD, 아지즈]
use_math: true
redirect_from:
  - /2022/03/22
---

* Kramdown table of contents
{:toc .toc} 

# MongoDB Overview

table == collections
row == documents
p9 == p10 -> p12


embedded documents = nested document

key part is field

기존 DB에서는 primary key를 만들어서 관리하고,
테이블 조인할때는 forign key를 만들어서 연결해줘야하는데,

몽고디비에서는 그런게 없어서 관리하기 쉬움

SQL 에서는 아토믹한 값만 취급했는데,

몽고디비에서는 Array of Values, Array of Document, Embedded document 가 모두 값이 될 수 있음


document는 총 몇개?


# MongoDB Components

중괄호 = Document

Database ? many collections

use DATABASE_NAME : If the database already exists, it will return the existing database

db : check selected database

show dbs : check your databases list, 데이터를 아무것도 안넣으면 아직 empty, 그래서 show에서 나오지 않음

dp.dropDatabase() : 현재 DB 삭제
db.COLLECTION_NAME.drop() : 현재 Collection 삭제

db.createCollection("name", {options})[^options]

show collectios : 현재 Database의 collection list 출력

db.COLLECTION_NAME.insert(\[{document}\]) : collection 이 생성되어있지 않더라도 document를 입력하면, collection이 자동으로 생성됨




[^options] : {capped[^capped] : Boolean, size[^size] : number, max[^max] : number}
[^capped] : 고정된 사이즈를 가지게 됨. capped가 true면 size or max를 정해줘야함. 
[^size] : capped collection의 최대 `byte`를 정해줌
[^max] : capped collection의 `douments의 최대 갯수`를 정해줌



# First step with MongoDB


스키마 :
You can easily visualize your schema to understand the frequency, types and ranges of fields in your data

위에 설명을 가져와서 내 데이터가 어떤거다라고 설명할 수 있음

로그를 사용할때, capped collection을 사용
몇년전의 과거의 로그는 딱히 필요가 없기 때문

explain plan은 쿼리랑 관련있음
Explain provides key execution metrics that help diagnose slow queries and optimize index usage

내가 만든 쿼리의 성능을 보여줌

필터 = 조건


