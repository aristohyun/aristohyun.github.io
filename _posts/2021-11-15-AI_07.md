---
layout: post
title: "AI, 7장 계획수립"
description: "AI, 이건명 교수님"
categories: [AI]
tags: [2021-2, AI, Artificial Intelligence, 이건명]
use_math: true
redirect_from:
  - /2021/11/15/
---

* Kramdown table of contents
{:toc .toc}  

# 계획수립, Planning

> 주어진 계획수립 무제의 임의의 초기 상태에서 목표 상태 중의 하나로 도달할 수 있게 하는 일련의 행동을 생성하는 것

#### 로봇의 계획수립

- **움직임 계획수립(motion planning)**
    – 원하는 움직임 작업을 수행하도록 제약조건을 만족시키면서 최소의 비용으로 일련의 움직임을 찾아내는 일
- **경로 계획수립(path planning)**
    – 시작 위치에서 목적 위치로 가기 위해 관절이나 바퀴를 이동시킬 순차적인 위치를 결정하는 일
- **궤적 계획수립(trajectory planning)**
    - 주어진 경로와 제약조건 및 물리적인 특성을 고려하여 매 시점의 관절등의 위치, 속도, 가속도 등을 결정하는 일

## 계획 수립 문제

> 초기 상태에 대한 명세 
> + 원하는 목표 상태에 대한 명세 
> + 가능한 행동들에 대한 명세

### 문제 형태에 영향을 주는 요소

- 행동의 결과가 결정적인가 비결정적인가
- 상태 변수는 이산적인가 연속적인가
- 현재 상태를 알 수 있는가. 정확히 알 수 있는가 아니면 간접적인 정보만 알 수 있는가
- 초기 상태의 개수가 얼마나 되는가
- 행동은 지속시간이 있는가
- 여러 개의 행동을 <blue>동시</blue>에 할 수 있는가, 아니면 <blue>한 번에 하나</blue>의 행동만 하는가
- 계획의 목적이 지정된 <blue>목표 상태에 도달</blue>하는 것인가, 아니면 </blue>보상을 최대</blue>로 하는 것인가
- 에이전트가 하나인가 여러 개 있는가
- 에이전트들이 서로 협력하는가 이기적인가
- 에이전트 각자가 자신의 계획을 만드는가, 아니면 전체 에이전트들을 위해 하나의 계획을 만드는가

### 고전적 계획수립 문제, classical planning

> 가장 간단한 계획 수립 문제 부류

- 기본 전제
  - 초기 상태는 하나만 주어진다
  - 행동들에 지속시간이 없고, 
  - 행동의 결과가 결정적이며, 
  - 한번에 하나의 행동만 수행할 수 있다
  - 행동을 하는 <red>에이전트</red>는 <red>하나</red>뿐이다
- 일련의 행동들을 수행한 이후의 세계의 상태는 예측가능하다
- 계획은 일련의 행동들로 정의된다
  - 목표상태에 도달하기 위해 어떤 행동을 해야 하는지 미리 결정할 수 있다


### 마르코프 결정과정 문제, MDP[^MDP]

> Markov Decision Process       
> 행동들의 결과는 비결정적이고,    
> 에이전트가 행동을 통제할 수 있는 문제   

다음 상태는 현재상태와 에이전트의 행동에만 영향을 받으므로
과거 상테에는 영향을 받지 않는다. 각 상태는 확률적으로 독립적이다

`강화학습에서 관심을 갖는 문제`

- 행동들은 지속시간이 없다
- 행동의 결과가 확률에 따라 결정되어 비결정적이다
- 행동의 결과는 관측가능하며, 학인할 수 있다
- 보상함수를 최대화하는 것을 목적으로 한다
- 행동을 하는 에이전트는 하나뿐이다

[^MDP]: 이산시간 마르코프 결정과정 문제, discrete time stochastic control process

#### 예, 빠르게 멀리 가는 방법 찾기

![image](https://user-images.githubusercontent.com/32366711/142654380-e5480dcc-41da-4b7b-af6c-17b68f952dd9.png)


### 부분관측 마르코프 결정과정, POMDP

> partially observable Markov decision process    
> 행동의 결과가 확률에 따라 결정되는 비결정적인 마르코프 결정과정     

`행동의 결과가 부분적(간접적)으로 관측된다`

- 현재 상태를 정확히 알 수 없고 확률적인 분포로만 추정가능하다
- 현재 상태에 대한 확률적 분포를 믿음, belief라고 함
- 행동을 하며 이 belief를 갱신함

#### 예, 호랑이 문제

![image](https://user-images.githubusercontent.com/32366711/142654874-cdef98d3-2dec-4375-b99a-793d13ec9f79.png)


### 다중 에이전트 계획 수립, multi-agent

> 여러 에이전트가 있는 계획수립 문제

- 하나의 <red>공동 목표</red>를 위한 에이전트들이 <red>계획수립</red>을 하는 것
- 작업 및 자원에 대한 협상을 통해 <red>계획을 정제</red>하는 것
- 목표 달성을 위해 에이전트들의 <red>작업을 조정</red>하는 것

## 계획 수립기, planner

> 주어진 문제에 대한 계획을 생성하는 알고리즘 또는 프로그램

### 특정 영역 계획수립기(domain-specific planner)

> 해당 영역에 특화된 계획수립 방법      
> 다른 영역에 적용 불가    

- 로봇의 경로 계획 및 움직임 계획
- 통신망의 통신채널 계획
- 생산현장의 기구 조작 등

### 영역 독립 계획수립기(domain-independent planner) 

> 범용 꼐획수립기           
> 영역에 상관없이 적용 가능

- 특정영역 계획수립기에 비해 처리속도가 느림
- 효과적인 계획수립기 개발이 어려움

상태공간 계획수립과 계획공간 계획수립으로 나누어 개발/사용

### 설정가능 계획수립기(configurable planner)

> 영역 독립 계획수립기를 사용하면서,       
> 해당 영역의 문제를 해결하는 방법에 관한 정보를 입력으로 사용

- 특정영역 계획수립기 보다는 계획수립의 범용성이 높으며 
- 영역독립 계획수립기 보다는 처리 효율성이 좋음

ex. 계층적 태스크 네트워크(HTN) 계획수립

## 계획수립 언어

> 계획수립 문제를 표현하는데 사용하는 언어

#### 고전적 계획수립 문제를 표현하는 언어

- STRIPS, PDDL 등
- 리터럴로 표현되는 상태변수가 중심
- 에이전트를 포함한 세계의 상태는 상태 변수에 값을 지정하여 표현
- 행동에 대한 표현은 행동전후 상태변수 값의 변화내용을 기술함
- 상태변수들이 상태공간을 결정
  - 상태변수들의 개수가 늘어나면, 상태공간의 크기는 기하급수적으로 증가한다

### STRIPS

> Stanford Research Institute Problem Solver[^STRIPS]      
> 자동 계획생성기의 이름        
> 계획수립 문제를 표현하는 언어의 이름            

상태와 행동을 표현하기위해 <red>술어논리</red> 사용

- 상태 : 긍정 리터럴의 논리곱으로 표현
  - $At(Home) \wedge Have(Banana)$

- 목표 : 리터럴들의 논리곱으로 표현
  - $At(Home) \wedge \nee Have(Banana)$
  - $At(x) \wedge Sells(x, Banana)$

- 행동 : 이름, 매개변수 목록, 사전조건, 효과로 구성
  - 이름 : 어떤 일을 하는 것인지 기술
  - 매개변수 목록 : 사전조건과 효과에 값을 전달하는 변수들
  - 사전조건 : 행동을 실행하기 전에 만족되어야 하는 조건기술
  - 효과 : 행동의 실행 후에 생기는 상태변화를 나타내는 것
    - 긍정 리터럴 : 행동 실행으로 새로 생기는 성질 표현 add-list
    - 부정 리터럴 : 행동 실행으로 더 이상 만족되지 않는 성질 표현 delete-list

#### 예, 행동 : 상자 위에 올라간다(Climb Up)

- 사전조건 : 대상의 위치와 상자의 위치가 같고 높이는 아래쪽이다
- 효과 : 높이가 아래쪽에서 위쪽으로 바뀐다

Action : ClimbUp(location)
Precondition : At(location), BoxAt(location), level(Low)
Effect : 
  - add-list: Level(High)
  - delete-list Level(Low)

### PDDL

> Planning Domain Definition Language   
> 고전적 계획수립 문제의 표현방법을 표준화하기 위해 개발[^PDDL]
> 국제 계획수립 대회의 표준언어(IPC)로 사용, 계속 진화

- 문제 영역 세계에 있는 객체(object)
- 객체의 성질에 대한 술어(predicate)
- 초기 상태
- 목표 상태
- 행동

계획 수립 문제를 두 개의 파일에 나누어 저장
- domain 파일 : 문제 영역 정의에 사용
  - 술어, 행동에 대한 정보 저장
- problem 파일 : 문제 정의에 사용
  - 객체, 초기 상태, 목표 저장

[^STRIPS]: 미국 SRI International의 Richard Fikes와 Nils Nilsson이 개발
[^PDDL]: Drew McDermoot 등 개발

